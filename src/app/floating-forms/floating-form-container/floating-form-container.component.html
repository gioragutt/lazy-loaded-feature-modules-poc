<mat-card cdkDrag class="floating-form-container" cdkDragBoundry=".page-drag-boundry" (focus)="focused = true"
  (focusout)="focused = false" [class.focused]="focused" tabindex="-1">
  <mat-tab-group [selectedIndex]="selected.value" (selectedIndexChange)="selected.setValue($event)" class="tabs"
    animationDuration="0ms" cdkDragHandle>
    <mat-tab *ngFor="let tab of componentTabs; let i=index">
      <ng-template mat-tab-label>
        <span>{{tab.formEntry.name}}</span>
        <button mat-icon-button *ngIf="(openFloatingFormContainers$ | async) > 1 || componentTabs.length > 1"
          class="split-button" (click)="split(i, tab.formEntry)">
          <mat-icon>keyboard_tab</mat-icon>
        </button>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
  <div *ngFor="let tab of componentTabs; let index=index" [hidden]="selected.value !== index" class="tab-content">
    <ng-template *ngIf="!tab.viewRef" libFormRegistryComponent [fromComponent]="tab.formEntry.component">
    </ng-template>
    <ng-template *ngIf="tab.viewRef" libFormRegistryComponent [fromExisting]="tab"></ng-template>
  </div>
  <div class="actions">
    <mat-divider></mat-divider>
    <mat-action-list>
      <button mat-button (click)="closeTab()">
        Close
      </button>
    </mat-action-list>
  </div>
</mat-card>